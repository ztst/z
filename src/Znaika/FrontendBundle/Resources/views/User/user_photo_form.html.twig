<div class="photo-container">
  <img width="198" id="userAvatar"
       src="{% if user.hasPhoto %}{{ user.getPhotoUrl }}{% else %}{{ asset("images/user-profile/default-userpic.png") }}{% endif %}"
       title="Фотография"/>
</div>

<div id="uploadPhotoProgress" class="hidden">Загружается...</div>
{{ form_start(form, {'attr': {'id': 'editUserPhotoForm'}, 'action': url('edit_user_photo', {'userId': userId}), 'method': 'POST'}) }}
  {{ form_errors(form, {'attr': {'class': 'alert alert-danger' }}) }}
  <div class="upload-photo-button-container">
    <a href="javascript:void(0);" class="edit-button" id="editUserPhotoButton">
      <span class="edit-button-icon"></span>
      <span class="edit-button-label button-label">{% if user.hasPhoto %}Изменить фото{% else %}Добавить фото{% endif %}</span>
    </a>
    <div class="form-group photo-button">
      {{ form_errors(form.photo) }}
      {{ form_widget(form.photo, {'id': 'submit'}) }}
    </div>
  </div>

  <div class="delete-photo-button-container">
    <a href="javascript:void(0);" class="edit-button {% if not user.hasPhoto %}hidden{% endif %}" id="deleteUserPhotoButton">
      <span class="edit-button-icon"></span>
      <span class="edit-button-label">Убрать фото</span>
    </a>
    <input type="hidden" id="userId" value="{{ user.userId }}"/>
    <input type="hidden" id="defaultPhotoUrl" value="{{ asset("images/404.jpg") }}" />
  </div>
{{ form_end(form) }}

<div id="uploadErrorPopup" class="popup mfp-hide">
  <div class="popup-content">
    <h1>Ошибка добавления фотографии</h1>
    <p>
      К сожалению, произошла ошибка. Пожалуйста, проверьте, соответствует ли фотография следующим требованиям:
    </p>
    <ol>
      <li>Фотография должна иметь размер не меньше 300 точек и не больше 4000 точек по каждой из сторон.</li>
      <li>Размер одной стороны не должен более чем в 3 раза превышать размер другой стороны.</li>
      <li>Размер файла с фотографией не должен превышать 10 МБ.</li>
      <li>Фотография должна быть в формате JPG, PNG или GIF.</li>
    </ol>
    <label class="upload-label" for="submit">Выбрать фото</label>
    <div class="clear"></div>
  </div>
</div>